<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Pumping Lemma Simulation</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
  <link rel="stylesheet" href="css/styles.css">
  <link rel="stylesheet" href="css/interactive.css">
  <script src="mobile_detection.js"></script>
</head>
<body>
  <div class="container">
    <!-- Quick Guide Section -->
    <div class="guide-container">
      <div class="guide-header">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"></circle>
          <path d="M12 8v4M12 16h.01"></path>
        </svg>
        <h2>Pumping Lemma Guide</h2>
      </div>
      <div class="guide-steps">
        <div class="guide-step">
          <div class="step-number purple">1</div>
          <div class="step-text">Select language type and choose a test string</div>
        </div>
        <div class="guide-step">
          <div class="step-number blue">2</div>
          <div class="step-text">Use sliders to set segment boundaries (xyz or uvwxy)</div>
        </div>
        <div class="guide-step">
          <div class="step-number green">3</div>
          <div class="step-text">Set pumping count and generate pumped strings</div>
        </div>
        <div class="guide-step">
          <div class="step-number red">4</div>
          <div class="step-text">Test validity and observe lemma violations</div>
        </div>
      </div>
    </div>

    <!-- Language Type Tabs -->
    <div class="language-tabs">
      <div class="tab-buttons">
        <button id="regularBtn" class="tab-button active" data-type="regular">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M8 12h8M12 8v8"></path>
          </svg>
          Regular Languages
        </button>
        <button id="contextFreeBtn" class="tab-button" data-type="context-free">
          <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
            <polyline points="14,2 14,8 20,8"></polyline>
          </svg>
          Context-Free Languages
        </button>
      </div>
    </div>

    <!-- Top Controls Bar -->
    <div class="top-controls-bar">
      <!-- All Action Controls -->
      <div class="action-controls-section">
        <div class="controls-title">Controls:</div>
        <div class="horizontal-controls">
          <button id="pumpString" class="button purple">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8z"/>
              <path d="M12 18c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"/>
            </svg>
            Pump String
          </button>
          <button id="showAllPumped" class="button red">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/>
            </svg>
            Test All
          </button>
          <button id="analyzeLemma" class="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"/>
            </svg>
            Analyze
          </button>
          <button id="resetAll" class="button">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
              <path d="M4 12a8 8 0 0 1 8-8V2.5L16 6l-4 3.5V8a6 6 0 1 0 6 6h1.5a7.5 7.5 0 1 1-15.5 0z"/>
            </svg>
            Reset
          </button>
        </div>
      </div>

      <!-- Predefined Languages -->
      <div class="predefined-section">
        <div class="controls-title">Languages:</div>
        <div class="predefined-language-buttons">
          <button class="predefined-btn active" data-lang="a*b*">a*b*</button>
          <button class="predefined-btn" data-lang="(ab)*">(ab)*</button>
          <button class="predefined-btn" data-lang="a^nb^n">a^n b^n</button>
          <button class="predefined-btn" data-lang="palindromes">Palindromes</button>
          <button class="predefined-btn" data-lang="a^nb^nc^n">a^n b^n c^n</button>
        </div>
      </div>
    </div>

    <!-- Main Content Layout -->
    <div class="main-content-layout">
      <!-- Left Sidebar - Input Controls -->
      <div class="left-sidebar">
        <div class="control-section">
          <h3>Test String</h3>
          <input type="text" id="testString" placeholder="Enter test string (e.g., aaabbb)" class="string-input">
          <div class="string-length-control">
            <label>Length: <span id="stringLengthValue">6</span></label>
            <input type="range" id="stringLength" min="3" max="20" value="6" class="slider">
          </div>
        </div>

        <div class="control-section">
          <h3>Pumping Control</h3>
          <div class="pump-count-control">
            <label>Pumping Count (i): <span id="pumpCountValue">1</span></label>
            <input type="range" id="pumpCount" min="0" max="5" value="1" class="slider">
            <p class="pump-explanation">i=0: delete, i=1: original, i>1: repeat</p>
          </div>
        </div>
      </div>

      <!-- Center Area - Main Visualization -->
      <div class="center-area">
        <div class="main-visualization">
          <!-- Language Description -->
          <div class="language-info">
            <h2 id="currentLanguageTitle">Regular Language: a*b*</h2>
            <p id="currentLanguageDesc">Zero or more a's followed by zero or more b's</p>
          </div>

          <!-- String Decomposition -->
          <div class="decomposition-container">
            <!-- Regular Language Decomposition (xyz) -->
            <div id="regularDecomposition" class="decomposition-display">
              <div class="decomposition-formula">
                <h3>w = xyz</h3>
                <p>Constraints: |xy| ≤ p, |y| ≥ 1</p>
              </div>
              
              <div class="string-visualization">
                <div id="regularStringDisplay" class="string-display-main">
                  <span class="no-content">Enter a string to see decomposition</span>
                </div>
              </div>
              
              <div class="decomposition-controls">
                <div class="slider-control">
                  <label>x: <span id="xLengthValue">1</span></label>
                  <input type="range" id="xLength" min="0" max="10" value="1" class="decomp-slider">
                </div>
                <div class="slider-control">
                  <label>y: <span id="yLengthValue">1</span></label>
                  <input type="range" id="yLength" min="1" max="10" value="1" class="decomp-slider">
                </div>
              </div>
            </div>

            <!-- Context-Free Language Decomposition (uvwxy) -->
            <div id="cfDecomposition" class="decomposition-display" style="display: none;">
              <div class="decomposition-formula">
                <h3>w = uvwxy</h3>
                <p>Constraints: |vwx| ≤ p, |vx| ≥ 1</p>
              </div>
              
              <div class="string-visualization">
                <div id="cfStringDisplay" class="string-display-main">
                  <span class="no-content">Enter a string to see decomposition</span>
                </div>
              </div>
              
              <div class="decomposition-controls">
                <div class="slider-control">
                  <label>u: <span id="uLengthValue">1</span></label>
                  <input type="range" id="uLength" min="0" max="10" value="1" class="decomp-slider">
                </div>
                <div class="slider-control">
                  <label>v: <span id="vLengthValue">1</span></label>
                  <input type="range" id="vLength" min="0" max="10" value="1" class="decomp-slider">
                </div>
                <div class="slider-control">
                  <label>w: <span id="wLengthValue">1</span></label>
                  <input type="range" id="wLength" min="0" max="10" value="1" class="decomp-slider">
                </div>
                <div class="slider-control">
                  <label>x: <span id="xLengthValueCF">1</span></label>
                  <input type="range" id="xLengthCF" min="0" max="10" value="1" class="decomp-slider">
                </div>
              </div>
            </div>
          </div>

          <!-- Pumped String Result -->
          <div class="pumped-result-container">
            <h3>Pumped String Result</h3>
            <div id="pumpedStringDisplay" class="pumped-string-display-main">
              <span class="no-content">Generate a pumped string to see result</span>
            </div>
            <div id="membershipResult" class="membership-result-main"></div>
          </div>

          <!-- Analysis Section - Moved here for better visibility -->
          <div class="analysis-container">
            <div class="analysis-section">
              <h3>Pumping Lemma Analysis</h3>
              <div id="lemmaAnalysis" class="analysis-content">
                <p>Configure string decomposition and test pumping to see analysis</p>
              </div>
            </div>

            <div class="violation-section" id="violationFeedback" style="display: none;">
              <h4>Violation Detected!</h4>
              <div id="violationDetails" class="violation-content"></div>
            </div>
          </div>
        </div>
      </div>

      <!-- Right Sidebar - Test Results -->
      <div class="right-sidebar">
        <div class="results-section">
          <h3>Test Results</h3>
          
          <div class="all-results" id="allResultsSection" style="display: none;">
            <h4>All Pumping Tests:</h4>
            <div id="allResultsDisplay" class="results-list"></div>
          </div>

          <div class="individual-result" id="individualResultSection" style="display: none;">
            <h4>Current Test:</h4>
            <div id="currentTestResult" class="result-item"></div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Scroll to Results Pill Button -->
  <button id="scrollToResultsPill" class="scroll-to-results-pill">
    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 24 24">
      <path d="M7 14l5 5 5-5H7z"/>
    </svg>
    Scroll to see analysis
  </button>

  <script src="js/data.js"></script>
  <script src="js/helper.js"></script>
  <script src="js/interactive_new.js"></script>
</body>
</html>
